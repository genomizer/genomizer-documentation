This is a user manual for the desktop client. It will provide guides on how to 
use the client and the different functionalities it holds. The screen shots 
shown in this document are made from a Linux machine, but the application 
also runs on Windows or Mac, and will follow the design principles thereafter. 
Because of this, some details of the look of the client may vary, but the functionality is the same.

\subsection{Login and startup}
When you start this application the first thing that's displayed is a login screen, as illustrated in \refer{fig:des_login-pic}. In this screen you enter your username, password and the IP-Address for the server and then press the login button to enter the \appName\ Desktop.

\begin{figure}[h!]
	\addScaledImage{0.4}{des_login_picture.png}
	\caption{Screenshot of the login screen.}
	\label{fig:des_login-pic}
\end{figure}
The application is built with tabs, as illustrated below in \refer{fig:des_tabs-view}. Each tab contains separate features of the application. There are seven tabs: Search, Upload, Process, Workspace, Administration, Convert and Settings.
\begin{figure}[htb]
	\addImage{des_tabs.png}
	\caption{Illustration of the different tabs of \appName Desktop and displaying the Search tab.}
	\label{fig:des_tabs-view}
\end{figure}
\FloatBarrier

\subsection{Search}
The first tab you see after logging in is the Search tab, illustrated in \refer{fig:des_search-query}. The Search tab uses the same query building technique as the “Pubmed Advanced Search Builder”\cite{des_3}. It has one text field where you either can type in the query yourself or you can use the query builder to build the query. \\

To switch between manually editing the query and using the query builder there are two radio buttons to the left of the text field. Each row in the query builder has at most five components. These are a logical expression, an annotation name field, a free text field or a drop down menu to insert search words, a minus button and a plus button. The plus button is only available in the last row and it adda another row to the query. The minus button is used to remove a row and it exists on every row except if there is only one row in the query. The logical expressions combines the annotations, so they are available in every row but the first. \\

By writing in the annotation text field or selecting a value in the drop down menu you can specify the query the row will produce. Together each row builds a full query. As illustrated in \refer{fig:des_search-query} below.
\begin{figure}[htb]
	\addImage{des_search_tab.png}
	\caption{Illustration of a query, made by the query builder.}
	\label{fig:des_search-query}
\end{figure}
\FloatBarrier
\subsubsection{Search results}
When you press the search button the search tab will change it's view to display the search results as illustrated in \refer{fig:des_search-results}. The results are displayed as experiments in a tree table. Each row is an experiment that can be expanded to show more information and the files associated with the experiment. \\

The tree table can be sorted both vertically or horizontally by clicking the headings or by dragging and dropping the columns. You can choose which columns to display by using the menu in the upper right corner of the table. In the same menu there are also buttons for expanding and collapsing all experiments in the search results. \\

To go back to the previous view, you can click the \emph{Back} button. There is also a button called \emph{Add to workspace} for adding the selected files or experiments to the workspace. The last button, \emph{Edit experiment} is used to upload more files to an experiment or to edit information in the marked experiment.

\begin{figure}[htb]
	\addImage{des_search_res.png}
	\caption{Illustration of search results.}
	\label{fig:des_search-results}
\end{figure}
\FloatBarrier

\subsection{Upload}
If you need to upload files to the database it can be done through the upload tab. When the tab is pressed you get presented with a button to create a new experiment shown in figure \ref{fig:des_upload-tab}.

\begin{figure}[h!]
	\addImage{des_upload_tab.png}
	\caption{Illustration of the starting view of the upload tab.}
	\label{fig:des_upload-tab}
\end{figure}
\subsubsection{Existing experiment}
\label{sec:des_exists}
In order to edit files or upload files to an existing experiment you need to search for the experiment in the search tab and then press the \emph{Edit experiment} button. When this is done the experiment information get retrieved from the server and presented to you. \\

To edit the experiment, change the annotation values and press the \emph{Save changes} button. To add files to the wanted experiment you can press the "Browse files"-button to add files to the experiment. Then a file browser window pops up, it is illustrated in figure \ref{fig:des_upload}. Here you can select the files you want to add to the experiment. The files will be added to the upload tab and there will be some new choices available for you. Each file  will be associated with one file row, this is also shown in \ref{fig:des_upload-exists}. \\

The new choices are whether the new files are either raw, region or profile files. And if it is region or profile there is another choice for which genome release. There is also the possiblity to delete the file row, by clicking the "X"-button, in case this file is not suppose to be added to the experiment. After all is decided and the files are correct you simply click the "Upload files"-button. Then the progress bar starts to progress and if all goes well it will reach 100\% and the files is added to the existing experiment.

\begin{figure}[h!]
	\addImage{des_upload_existing.png}
	\caption{Illustration of the add to existing experiment part of the upload tab.}
	\label{fig:des_upload-exists}
\end{figure}
\newpage
\subsubsection{New experiment}
\label{sec:des_create}
The first thing you need to do when creating a new experiment is pressing the "Create new experiment"-button in the upload tab. After pressing this button all the different annotations get retrieved from the server. If the annotation is of the type that should be filled with text there is an textfield to be filled out, and if it's a multiple choice annotation there is a dropdown menu of the different choices. The annotations who have bold text are forced and needs to be filled out in order to create the experiment. There are also three buttons added to the view. This is illustrated in \ref{fig:des_upload-new}. In order to add files to this experiment you need to press the "Browse files"-button where a filebrowser appears and choose which files are to be added. When the files are added they each get displayed in a file row. The file row consists of the file name and a progress bar. \\

 Apart from the add experiments there are also three buttons and a checkbox. The checkbox will be explained in section \ref{sec:des_batch} below. The other three buttons are used in the same manner as in section \ref{sec:des_exists} above. When all the annotations that are needed is filled in and the associated files are added you press the "Create with all files"-button to create the experiment. The "Create experiment with selected files"-button is discussed in section \ref{sec:des_batch} below. \\

\begin{figure}[h]
	\addImage{des_upload_new.png}
	\caption{Illustration of the create new experiment part of the upload tab.}
	\label{fig:des_upload-new}
\end{figure}
\subsubsection{Batch upload experiments}
\label{sec:des_batch}
In order to batch upload experiment the workflow of this application is suggested as follows:
You start of as when uploading one experiment, as explained in \ref{sec:des_create}. But instead of choosing the wanted files for that experiment you choose all the files that are supposed to be uploaded to the experiments. You then starts to fill in the annotaions for the first experiment and selects the files that is going to be used in the experiment by checking the select field. After the files are selected you need to press the "Create experiment with selected files"-button. This creates the first experiment and starts to upload the selected files to it. \\

After the experiment is created, you can change the annotations needed for the second experiment and then select the files for that experiment. You can then click the "Create experiment with selected files"-button again and change the annotations to match the third experiment and the select the files for it and start the upload. Every file that is uploaded is removed from the list of files. 

\begin{figure}[h]
	\addScaledImage{0.5}{des_upload_select.png}
	\caption{Illustration of the file browsing window.}
	\label{fig:des_upload}
\end{figure}
\FloatBarrier

\subsection{Process}
In the process tab there is a list of files to the left. These files are chosen from the Workspace tab for process, see \refer{fig:des_workspace-view}. From this list you can mark RAW-files and choose to create profile data by left clicking on the files they will be marked. If you left click once again on the same file it will be unmarked. For each file there exists only one specie, the list shows the user which specie a file has. \\ When a file is marked the \emph{Genome release files} dropdown list will be filled with all genome versions that exists for that specie. If you enter the create profile data tab and presses the Start process button which is visible in the right side of the tab see \refer{fig:des_process-view}, all the files that are marked will now be processed to profile data. This list of files will be empty unless you have chosen to process selected RAW-files from the workspace tab. If that is the case then those selected RAW-files will then be visible in the list of files in the process tab. \\ When you have selected some RAW files you have the option to change the processing parameters that is above the Start process button as illustrated in \refer{fig:des_process-view}. These parameters has pre-set values and allowed intervals. The conversion parameters are \emph{Flags, Genome release files, Window size, Smooth type, Step position, Step size, Print mean} and \emph{Print} zeros. Information about all the different parameters can be found in a popup windows showed in \refer{fig:des_process-view-info}. For you to reach this window you need to press the information button that is on the upper right side in the process tab. To be able to process files some parameters needs to be set in order for the process to start. If the parameters are invalid, empty or wrong  ,the process will not be able to start until it is fixed. Depending on what format you choose to process different parameters will be enabled. For example ratio calculation parameters cant be set unless SGR format is used.

If you have selected some RAW-files and then press the "Start process"-button, then if all went well and the server could process the files a message \texttt{"The server has started process on file: <File> from experiment: <Experiment>"} will print in the Console for each file that was converted to profile data. If for some reason the server couldn't create profile data for any RAW-file another message \texttt{"WARNING - The server couldn't start processing on file: <File> from experiment: <Experiment>"} will print in the console that is visible in the middle bottom of the process tab see \refer{fig:des_process-view}. If you want to perform a ratio calculation while processing a file you have the option to press the \emph{Use ratio calculation} button. When pressed a popup window appears and you get the option to fill in several ratio calculation parameters. These parameters consists of eight parameters \emph{Ratio calculation, Input reads cut-off, Chromosomes, Window size , Smooth type, Step position, print mean} and  \emph{print zeros}. If the Console area gets filled with messages you have the option to clear the Console area from text. This is possible when pressing the Clear console button which is positioned bottom/center in the process tab. When you have started a process you can choose to check which priority that process currently have. This is done by pressing the Get process feedback button which is located in the bottom/right corner of the process tab se \refer{fig:des_process-view}.




\begin{figure}[htb]
	\addImage{des_process_tab.png}
	\caption{Screenshot of the process tab in the program.}
	\label{fig:des_process-view}
\end{figure}

\begin{figure}[htb]
	\addScaledImage{0.6}{des_parameter_info.png}
	\caption{The parameter information popup window.}
	\label{fig:des_process-view-info}
\end{figure}

\begin{figure}[htb]
	\addScaledImage{0.6}{des_ratio_calc_popup.png}
	\caption{The popup window for ratio calculation parameters.}
	\label{fig:des_process-view-ratio}
\end{figure}

\FloatBarrier

\subsection{Workspace} \label{sec:des_workspace}
The workspace Tab seen in \refer{fig:des_workspace-view} is a tab where you can temporarily store experiments and their files, and choose different options for action. Results from various searches can be stored here, and the contents of the workspace is saved as long as the program is running. Files and/or experiments are chosen by clicking them, multiple files by using either Shift-click, Ctrl-click or simply holding down the mouse button and dragging the cursor over multiple files. By choosing an experiment, all of the containing files are selected. Items can be deleted from the Workspace by pressing \emph{Remove from workspace}.
\subsubsection{Delete from database}
To delete the selected data from the database the \emph{Delete from database} button should be used instead. When pressing the delete button a small popup window with a progress bar will be displayed. By closing this window the deletion of data can be aborted.
\subsubsection{Upload to}
If you want to upload files to an experiment you have in the workspace, you can simply click the \emph{Upload to} button to switch to the upload tab and upload to the experiment they have selected. If multiple experiments have been selected, only the first one will be uploaded to.
\subsubsection{Process}
If you want to add files to the process tab there is a \emph{Process} button which transfers the selected files to the process tab file list.
\subsubsection{Download}
You can make the choice to download files to their local computer. If you press the \emph{Download} button seen in \refer{fig:des_workspace-view}, you get to choose a directory where you want to save the files. When a directory has been chosen, the files get downloaded and all current and completed download can be seen in the tab \emph{downloads}, see \refer{fig:des_download-view}.
\begin{figure}[htb]
	\addImage{des_workspace_select.png}
	\caption{Screenshot of the workspace tab in the program.}
	\label{fig:des_workspace-view}
\end{figure}
\begin{figure}[htb]
	\addImage{des_download.png}
	\caption{The downloads tab of the workspace}
	\label{fig:des_download-view}
\end{figure}
\FloatBarrier

%SYSADMIN START HERE...!
\subsection{Administration}
\subsubsection{annotation}

The system administration tools for the desktop client is available under the Administration tab. There are two different tools: Annotation and Genome files. The annotation tab is the first sub tab in the Administration tab. Annotations are used for specifying properties of uploaded data. For example, if new data from an experiment done with rat tissue is uploaded, the data shuld have an annotation called "species" with the value "rat". The Annotations sub tab in the Administration tab gives you the tools to create, edit and remove annotations and annotation values. 
\begin{figure}[htb]
	\addImage{annotationsView.png}
	\caption{The annotation view}
	\label{fig:annotationsView}
\end{figure}

In the annotations tab, when you select the "Add" button in the sidepanel a new popup window appears. It is possible to write the name of the new annotation and name of new values in this popup, as well as check a "forced annotation" box. The "forced" value determines if the annotation will have to be present in all future file uploads. See \refer{fig:adm_addAnnotationPopup}

\begin{figure}[htb]
	\addScaledImage{0.6}{adm_addAnnotationPop.png}
	\caption{The add annotation popup}
	\label{fig:adm_addAnnotationPopup}
\end{figure}

If you want to have free text as a value, for example if the annotation is pubmedID, the value of that annotation will not be able to be chosen from a drop-down menu, since the number available values is enormous. You might then want to use a freetext annotation, which allows you to type any value you want. To create a freetext annotation you click on the freetext tab on the "add" popup. 


To remove an annotation, you select an annotation from the table in the center of the view, and click on the remove button on the right side. You then have to confirm this deletion. After this the annotation is completely removed and cannot be brought back to life, see \refer{fig:adm_desktopRemoveAnnotation}. Some annotations cannot be removed for security reasons, 'Species' is such an annotation. Trying to remove it will generate an error message.
\begin{figure}[h!]
\addImage{adm_removeAnnotation.png}
\caption{The remove annotation popup.}
\label{fig:adm_desktopRemoveAnnotation}
\end{figure}
\subsubsection{Genome files}


The genome files tab shown in \refer{fig:adm_desktopGenomeTab} contains a table with information about which genome release versions are stored on the server. If you click on one of the entries, a smaller frame is displayed at the bottom of the table showing which files are included in the selected genome release. To the right of the genome release tab are the tools for adding new genome releases. You can name the new genome release in the text field and you are then able to upload the files associated with that genome release. \\

 When the desired files are selected, progress bars representing the upload of those files appear at the bottom of the "Add Genome Release" frame. When you press "Upload", the upload of the selected files will commence and you can follow the upload progress from the progress bars. After the upload is finished, you will be notified of its success or failure with a message dialog.
Genome releases can also be removed by selecting the release version from the table and pressing the "Remove genome release" button which appears at the bottom of the table when a release version is selected. This will remove the genome release and all associated files.

\begin{figure}[h!]
\addImage{genomeReleaseViewExtraInfo.png}
\caption{The genome release view.}
\label{fig:adm_desktopGenomeTab}
\end{figure}

If you want to add a new species to add or remove genome releases for, this can be done in the top right corner of the genome release tab. You simply writes the name of the new species and presses the "add" button and the species will be added to the "Species" annotation.


\subsubsection{Users}

The Users tab shown in \refer{fig:des_users} contains four different panels, one to create a new user, one to update an existing user, one to delete an existing user and one to show all the users. Just fill in all information in the text fields and press one of the buttons to do that command. There is three different kind of users, the Guest, User and the admin. The Admin is the only one to have access to this User tab.


 \begin{figure}[h!]
 \addImage{des_users.png}
 \caption{The Users admin view.}
 \label{fig:des_users}
 \end{figure}


\subsection{Convert}

The Convert tab shown in \refer{fig:des_convert} contains buttons to convert and remove selected files, and buttons to choose what to convert into. The panel 'Convert from' shows the files sent into the convert tab, and the panel 'Converted files' shows the finished files that have been converted. \\

To convert files, begin with selecting the wished files to convert in the \refer{fig:des_workspace-view} and press the convert button. You will be directed to the convert tab with the files, check all the files you want to convert (only possible to convert one filetype at a time) and press the 'Convert selected files' button. If the files managed to convert successfully they will appear in the 'Converted files panel' to the right. \\

Notice that you need to choose which filetype you want to convert into in the 'Convert to' panel if the selected files can be converted into many different filetypes. The convert from panel is only in the panel for show, to show which filetypes you have selected. \\

Remove files from the list by press the 'Remove selected files' button, and clear the list with finished conversions by clicking on the 'Clear converted files' button.


 \begin{figure}[h!]
 \addImage{des_convert.png}
 \caption{The Convert tab.}
 \label{fig:des_convert}
 \end{figure}

