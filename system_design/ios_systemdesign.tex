The  system is designed using the model-view-controller principle. Each view is controlled by its own controller class which reacts to user input and triggers changes in the model and updates the view accordingly.
\begin{figure}[ht]
\addScaledImage{0.3}{ios_UML2.png}
\caption{UML diagram.}
\label{fig:ios_UML}
\end{figure}
\FloatBarrier

\refer{fig:ios_UML} gives an overall image of the system design. Some classes are excluded from the figure to make it easier to get an overall idea of the system. The controller classes of the table cells and some other controller classes are not illustrated in the diagram. The non-excluded classes are:

\begin{itemize}

\item \term{Annotation} - contains information about an annotation and can format the annotation name to an aesthetically more pleasing representation.

\item \term{DataFileViewController} - controls the File view presented in \refer{fig:ios_files1}. It contains a reference to an experiment and lists all its files in a table.

\item \term{Experiment} - is a class that contains information related to an experiment, as well as its files.

\item \term{ExperimentDescriber} - generates a description of an experiment using annotations chosen by the user.

\item \term{ExperimentFile} - contains information about a file from an experiment.

\item \term{ExperimentParser} - parses experiment information from a NSDictionary to an Experiment object.

\item \term{FileContainer} - contains files and sorts them by file type.

\item \term{JSONBuilder} - creates different JSON requests.

\item \term{PubMedBuilder} - creates a pubmed search query.

\item \term{SearchResultController} - is a controller class for the Search Results view presented in  \refer{fig:ios_searchResult}. It configures the table which holds the information about the experiments a search resulted in. An ExperimentDescriber is used to generate a description of the experiments.

\item \term{SearchViewController} - is a controller class for the Search view, see \refer{fig:ios_search}. It checks which annotation-fields are used and tells the JSONBuilder to generate a corresponding search query when the user presses the search button. The class also contains a advanced search to allow the user to manually enter search queries. 

\item \term{SelectedFilesController} - is a controller class for the The selected files view shown in \refer{fig:ios_selectedFiles1}. The selected files controller contains information about files saved by the user.

\item \term{ServerConnection} - sends and receives JSON objects to and from the server.

\end{itemize}
